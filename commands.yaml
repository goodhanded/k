commands:
  init:
    help: "Initialize .k directory with default configuration templates."
    target: "@init.init_k_use_case.execute"

  assimilate:
    help: "Assimilate a voice memo into the daily note"
    target: "@daily_voice_notes.assimilate_voice_note_use_case.execute"
    arguments:
      path: "Local audio file path"

  generate:
    help: "Generate some resource"
    aliases: ["gen"]
    subcommands:
      prompt:
        help: "Generate a prompt"
        target: "@agency.generate_prompt_use_case.execute"
        arguments:
          template_name: "The name of the template to load from Obsidian"

  get:
    help: "Get some resource"
    subcommands:
      openai:
        help: "Get an OpenAI resource"
        subcommands:
          models:
            help: "Get the list of available models"
            target: "@openai.client.get_models"
            print_result: true
            print_map:
              format: table
              columns:
                - id
              order_by: id

  traceback:
    aliases: ["tb"]
    help: "Build a troubleshooting prompt from a traceback on the clipboard"
    target: "@traceback.build_troubleshooting_prompt_use_case.execute"

  transcribe:
    help: "Transcribe an audio file"
    target: "@transcription.transcribe_audio_use_case.execute"
    arguments:
      path: "Local audio file path"

  ask:
    help: "Prompt an AI agent"
    target: "@agency.prompt_agent_use_case.execute"
    arguments:
      agent_name: "The name of the agent to invoke"
      prompt: "Text to send to the agent"

  pr:
    help: "Generate pull request changes based on a prompt. Use the --clipboard flag to copy the generated prompt to the clipboard instead of invoking the LLM."
    target: "@agency.workflow.pull_request.invoke"
    arguments:
      prompt:
        help: "Text to generate pull request changes"
        positional: true
        nargs: "+"
      clipboard:
        help: "If set, the PR prompt is sent to the clipboard instead of being processed by the LLM"
        flag: true
      confirm:
        help: "If set, show token count and require confirmation before proceeding"
        flag: true

  run:
    help: "Run a subcommand"
    subcommands:
      discord:
        help: "Run the discord bot"
        target: "@agency.run_discord_bot_use_case.execute"
      indexer:
        help: "Run the indexer"
        target: "@agency.index_documents_use_case.execute"

  review:
    help: "Generate code review feedback for the project"
    target: "@agency.workflow.code_review.invoke"
    arguments:
      confirm:
        help: "If set, show token count and require confirmation before proceeding"
        flag: true
